<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>polycore</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
<li><a href="#Local_Functions">Local Functions</a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/cairo_helpers.html">cairo_helpers</a></li>
  <li><strong>data</strong></li>
  <li><a href="../modules/polycore.html">polycore</a></li>
  <li><a href="../modules/util.html">util</a></li>
  <li><a href="../modules/widget.html">widget</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>data</code></h1>
<p>Data gathering facilities for conky widgets</p>
<p></p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#EagerLoader:init">EagerLoader:init(fetch_data)</a></td>
	<td class="summary">Create an EagerLoader instance.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#eager_loader:load">eager_loader:load()</a></td>
	<td class="summary">Run a bulk conky_parse with collected strings from previous updates.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#eager_loader:get">eager_loader:get([remember=1], var[, ...])</a></td>
	<td class="summary">Retrieve a conky_parse result.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#cpu_percentages">cpu_percentages(cores)</a></td>
	<td class="summary">Get the current usage percentages of individual CPU cores</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#cpu_frequencies">cpu_frequencies(cores)</a></td>
	<td class="summary">Get the current frequencies at which individual CPU cores are running</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#cpu_temperatures">cpu_temperatures()</a></td>
	<td class="summary">Get the current CPU core temperatures
 relies on lm_sensors to be installed</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#fan_rpm">fan_rpm()</a></td>
	<td class="summary">Get the current speed of fans in the system
 relies on lm_sensors to be installed</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#memory">memory(unit)</a></td>
	<td class="summary">Get current memory usage info</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#network_speed">network_speed(interface)</a></td>
	<td class="summary">Get volume of down- and uploaded data since last conky update cycle.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#gpu_percentage">gpu_percentage()</a></td>
	<td class="summary">Get current GPU usage in percent.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#gpu_frequency">gpu_frequency()</a></td>
	<td class="summary">Get current GPU frequency.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#gpu_temperature">gpu_temperature()</a></td>
	<td class="summary">Get current GPU temperature.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#gpu_memory">gpu_memory()</a></td>
	<td class="summary">Get current VRAM usage.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#gpu_power_draw">gpu_power_draw()</a></td>
	<td class="summary">Get current GPU power draw.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#gpu_power_limit">gpu_power_limit()</a></td>
	<td class="summary">Get current GPU power draw.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#gpu_top">gpu_top()</a></td>
	<td class="summary">Get list of GPU processes with individual VRAM usage in MiB.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#is_mounted">is_mounted(path)</a></td>
	<td class="summary">Is the given path a mount?</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#drive_percentage">drive_percentage(path)</a></td>
	<td class="summary">Get the drive usage in percent for the given path.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#diskio">diskio(device[, mode[, unit]])</a></td>
	<td class="summary">Get activity of a drive.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#find_devices">find_devices()</a></td>
	<td class="summary">Detect mount points and their respective devices plus physical devices.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#device_temperatures">device_temperatures()</a></td>
	<td class="summary">Get current HDD/SSD temperatures.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#hddtemp">hddtemp()</a></td>
	<td class="summary">DEPRECATED; Get current HDD/SSD temperatures.</td>
	</tr>
</table>
<h2><a href="#Local_Functions">Local Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#convert_unit">convert_unit(from, to, value)</a></td>
	<td class="summary">Convert memory value from one unit to another.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Functions"></a>Functions</h2>

    <dl class="function">
    <dt>
    <a name = "EagerLoader:init"></a>
    <strong>EagerLoader:init(fetch_data)</strong>
    </dt>
    <dd>
    Create an EagerLoader instance.
 Pass a function that takes a list of keys and returns an iterator of values.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">fetch_data</span>
            <span class="types"><span class="type">function</span></span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "eager_loader:load"></a>
    <strong>eager_loader:load()</strong>
    </dt>
    <dd>
    Run a bulk conky_parse with collected strings from previous updates.
 Called at the begin of each update to greatly improve performance.







</dd>
    <dt>
    <a name = "eager_loader:get"></a>
    <strong>eager_loader:get([remember=1], var[, ...])</strong>
    </dt>
    <dd>
    Retrieve a conky_parse result.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">remember</span>
            <span class="types"><span class="type">int</span></span>

         (<em>default</em> 1)
        </li>
        <li><span class="parameter">var</span>
            <span class="types"><span class="type">string</span></span>
         string to be evaluated by <code>conky_parse</code>
        </li>
        <li><span class="parameter">...</span>
         Additional arguments passed to <code>var:format(...)</code>
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">string</span></span>
        result of <code>conky_parse(var)</code>
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">data.eager_loader:get(<span class="string">"$update"</span>)
data.eager_loader:get(<span class="string">"${cpu cpu%s}"</span>, <span class="number">2</span>)  <span class="comment">-- usage of second CPU core
</span>data.eager_loader:get(<span class="number">5</span>, <span class="string">"${fs_used_perc %s}"</span>, <span class="string">"/home"</span>)  <span class="comment">-- cached for 5 updates</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "cpu_percentages"></a>
    <strong>cpu_percentages(cores)</strong>
    </dt>
    <dd>
    Get the current usage percentages of individual CPU cores


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">cores</span>
            <span class="types"><span class="type">int</span></span>
         number of CPU cores
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">{number,...}</span></span>

    </ol>




</dd>
    <dt>
    <a name = "cpu_frequencies"></a>
    <strong>cpu_frequencies(cores)</strong>
    </dt>
    <dd>
    Get the current frequencies at which individual CPU cores are running


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">cores</span>
            <span class="types"><span class="type">int</span></span>
         number of CPU cores
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">{number,...}</span></span>

    </ol>




</dd>
    <dt>
    <a name = "cpu_temperatures"></a>
    <strong>cpu_temperatures()</strong>
    </dt>
    <dd>
    Get the current CPU core temperatures
 relies on lm_sensors to be installed



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">{number,...}</span></span>

    </ol>




</dd>
    <dt>
    <a name = "fan_rpm"></a>
    <strong>fan_rpm()</strong>
    </dt>
    <dd>
    Get the current speed of fans in the system
 relies on lm_sensors to be installed



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">{number,...}</span></span>

    </ol>




</dd>
    <dt>
    <a name = "memory"></a>
    <strong>memory(unit)</strong>
    </dt>
    <dd>
    Get current memory usage info


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">unit</span>
            <span class="types">optional <span class="type">string</span></span>
         like "B", "MiB", "kB", ...
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number,number,number,number</span></span>
        usage, easyfree, free, total
    </ol>




</dd>
    <dt>
    <a name = "network_speed"></a>
    <strong>network_speed(interface)</strong>
    </dt>
    <dd>
    Get volume of down- and uploaded data since last conky update cycle.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">interface</span>
            <span class="types"><span class="type">string</span></span>
         e.g. "eth0"
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number,number</span></span>
        downspeed and upspeed in KiB
    </ol>




</dd>
    <dt>
    <a name = "gpu_percentage"></a>
    <strong>gpu_percentage()</strong>
    </dt>
    <dd>
    Get current GPU usage in percent.
 Relies on nvidia-smi to be installed.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>

    </ol>




</dd>
    <dt>
    <a name = "gpu_frequency"></a>
    <strong>gpu_frequency()</strong>
    </dt>
    <dd>
    Get current GPU frequency.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        in MHz
    </ol>




</dd>
    <dt>
    <a name = "gpu_temperature"></a>
    <strong>gpu_temperature()</strong>
    </dt>
    <dd>
    Get current GPU temperature.
 Relies on nvidia-smi to be installed.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        temperature in °C
    </ol>




</dd>
    <dt>
    <a name = "gpu_memory"></a>
    <strong>gpu_memory()</strong>
    </dt>
    <dd>
    Get current VRAM usage.
 Relies on nvidia-smi to be installed.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number,number</span></span>
        used, total in MiB
    </ol>




</dd>
    <dt>
    <a name = "gpu_power_draw"></a>
    <strong>gpu_power_draw()</strong>
    </dt>
    <dd>
    Get current GPU power draw.
 Relies on nvidia-smi to be installed.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        power draw in W
    </ol>




</dd>
    <dt>
    <a name = "gpu_power_limit"></a>
    <strong>gpu_power_limit()</strong>
    </dt>
    <dd>
    Get current GPU power draw.
 Relies on nvidia-smi to be installed.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        power draw in W
    </ol>




</dd>
    <dt>
    <a name = "gpu_top"></a>
    <strong>gpu_top()</strong>
    </dt>
    <dd>
    Get list of GPU processes with individual VRAM usage in MiB.
 Relies on nvidia-smi to be installed.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">{{string,number},...}</span></span>
        list of {name, mem} value pairs.
    </ol>




</dd>
    <dt>
    <a name = "is_mounted"></a>
    <strong>is_mounted(path)</strong>
    </dt>
    <dd>
    Is the given path a mount?  (see conky's is_mounted)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">path</span>
            <span class="types"><span class="type">string</span></span>

        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">bool</span></span>

    </ol>




</dd>
    <dt>
    <a name = "drive_percentage"></a>
    <strong>drive_percentage(path)</strong>
    </dt>
    <dd>
    Get the drive usage in percent for the given path.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">path</span>
            <span class="types"><span class="type">string</span></span>

        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>

    </ol>




</dd>
    <dt>
    <a name = "diskio"></a>
    <strong>diskio(device[, mode[, unit]])</strong>
    </dt>
    <dd>
    Get activity of a drive.  If unit is specified the value will be converted
 to that unit.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">device</span>
            <span class="types"><span class="type">string</span></span>
         e.g. sda1
        </li>
        <li><span class="parameter">mode</span>
            <span class="types"><span class="type">string</span></span>
         "read" or "write"; both if nil
         (<em>optional</em>)
        </li>
        <li><span class="parameter">unit</span>
            <span class="types"><span class="type">string</span></span>
         like "B", "MiB", "kB", ...; no conversion if nil
         (<em>optional</em>)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number,string</span></span>
        activity, unit
    </ol>




</dd>
    <dt>
    <a name = "find_devices"></a>
    <strong>find_devices()</strong>
    </dt>
    <dd>
    Detect mount points and their respective devices plus physical devices.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">table</span></span>
         mapping of mount points (paths) to value pairs of
                (logical) device and physical device
                e.g. {["/"] = {"sda1", "sda"}}
    </ol>




</dd>
    <dt>
    <a name = "device_temperatures"></a>
    <strong>device_temperatures()</strong>
    </dt>
    <dd>
    Get current HDD/SSD temperatures.
 Relies on hwmon information in /sys/block. Requires drivetemp kernel module.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">table</span></span>
        mapping devices to temperature values
    </ol>




</dd>
    <dt>
    <a name = "hddtemp"></a>
    <strong>hddtemp()</strong>
    </dt>
    <dd>
    DEPRECATED; Get current HDD/SSD temperatures.
 Relies on hddtemp to be running daemon mode. The results depend on what
 hddtemp reports and may require manual configuration,
 e.g. via /etc/default/hddtemp
 For experimental NVME support, requires "nvme smart-log" to be available
 and added as an exception in sudoers, hddtemp does not support NVME.
<p> Since hddtemp is unmaintained and nvme support has been added to the kernel
 this function is deprecated. -> use data.device_temperatures




    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">table</span></span>
        mapping devices to temperature values
    </ol>




</dd>
</dl>
    <h2 class="section-header "><a name="Local_Functions"></a>Local Functions</h2>

    <dl class="function">
    <dt>
    <a name = "convert_unit"></a>
    <strong>convert_unit(from, to, value)</strong>
    </dt>
    <dd>
    Convert memory value from one unit to another.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">from</span>
            <span class="types"><span class="type">string</span></span>
         like "B", "MiB", "kB", ...
        </li>
        <li><span class="parameter">to</span>
            <span class="types"><span class="type">string</span> or <span class="type">nil</span></span>
         like "B", "MiB", "kB", ...
                       For nil, no conversion happens.
        </li>
        <li><span class="parameter">value</span>
            <span class="types"><span class="type">number</span></span>
         amount of memory in <code>from</code> unit
        </li>
    </ul>





</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2023-03-26 23:57:51 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
